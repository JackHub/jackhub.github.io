<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>View Controller | jackhub space</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ViewController的结构关系

ViewController中包含一个指向storyboard的指针, 一个项目中只有一个storyboard或者没有, 所有的其他viewController也都指向它.
viewController中包含一个UIview的指针, 它是这个viewCntroller的根视图, 被viewControl管理的其他视图都在它之上.
viewControl来负">
<meta property="og:type" content="article">
<meta property="og:title" content="View Controller">
<meta property="og:url" content="http://yoursite.com/2015/01/09/View-Controller/">
<meta property="og:site_name" content="jackhub space">
<meta property="og:description" content="ViewController的结构关系

ViewController中包含一个指向storyboard的指针, 一个项目中只有一个storyboard或者没有, 所有的其他viewController也都指向它.
viewController中包含一个UIview的指针, 它是这个viewCntroller的根视图, 被viewControl管理的其他视图都在它之上.
viewControl来负">
<meta property="og:image" content="http://i2.tietuku.com/aa8b64d36df89717.png">
<meta property="og:image" content="http://i2.tietuku.com/5def40f7afd0c98b.png">
<meta property="og:image" content="/img/viewController.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="View Controller">
<meta name="twitter:description" content="ViewController的结构关系

ViewController中包含一个指向storyboard的指针, 一个项目中只有一个storyboard或者没有, 所有的其他viewController也都指向它.
viewController中包含一个UIview的指针, 它是这个viewCntroller的根视图, 被viewControl管理的其他视图都在它之上.
viewControl来负">

  
    <link rel="alternative" href="/atom.xml" title="jackhub space" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/jj.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  

  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<div class="profilepic">
			<img src="/img/longmao.jpg">
		</div>

		<hgroup>
		  <h1 class="header-author"><a href="/">jackhub</a></h1>
		</hgroup>

		
		<p class="header-subtitle">朝着梦想追逐的小年轻</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/tags/随笔">随笔</a></li>
				        
							<li><a href="/tags/iOS">iOS</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/jackhub" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/iwaich" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/#" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud">
						<a href="/tags/iOS/" style="font-size: 20.00px;">iOS</a><a href="/tags/随笔/" style="font-size: 10.00px;">随笔</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay"></div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/img/longmao.jpg">
			</div>

			<hgroup>
			  <h1 class="header-author"><a href="/">jackhub</a></h1>
			</hgroup>
			
			<p class="header-subtitle">朝着梦想追逐的小年轻</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
					<li><a href="/tags/iOS">iOS</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/jackhub" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/iwaich" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/#" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <article id="post-View-Controller" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/01/09/View-Controller/" class="article-date">
  	<time datetime="2015-01-09T06:48:51.000Z" itemprop="datePublished">Jan 9 2015</time>
</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      View Controller
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="ViewController的结构关系">ViewController的结构关系</h3>
<ul>
<li>ViewController中包含一个指向storyboard的指针, 一个项目中只有一个storyboard或者没有, 所有的其他viewController也都指向它.</li>
<li>viewController中包含一个UIview的指针, 它是这个viewCntroller的根视图, 被viewControl管理的其他视图都在它之上.</li>
<li>viewControl来负责实现它所管理的视图的响应方式, 这个实现了显示和控制的隔离.</li>
</ul>
<p><img src="http://i2.tietuku.com/aa8b64d36df89717.png" alt="viewController"></p>
<h3 id="ViewControl与windows的关系">ViewControl与windows的关系</h3>
<p>对下面的图片解释一下:  </p>
<ul>
<li>window从screen那里获取屏幕的显示信息,根据此初始化UIWindow frame大小.</li>
<li>UIWindow中包含有一个*rootViewController的指针, 我们让它指向我们的viewController, 这样我们viewControl中的根UIview会自动添加为UIWindow的subView, viewController中的内容就能显示在窗口中了.</li>
</ul>
<blockquote>
<p>A view controller is usually owned by a window or another view controller.If a view controller is owned by a window object, it acts as the window’s root view controller.The view controller’s root view is added as a subview of the window and resized to fill the window.If the view controller is owned by another view controller, then the parent view controller determines when and how the child view controller’s contents are displayed.</p>
</blockquote>
<p><a id="more"></a><br><img src="http://i2.tietuku.com/5def40f7afd0c98b.png" alt="viewWindows"></p>
<h2 id="演示4中不同的视图控制实现方式">演示4中不同的视图控制实现方式</h2>
<ul>
<li>完全手动编写ViewControl</li>
<li>不使用ViewController</li>
<li>使用nib文件初始化viewController</li>
<li>使用storyboard管理ViewController</li>
</ul>
<p><img src="/img/viewController.png" alt="viewController"></p>
<h3 id="不使用ViewController">不使用ViewController</h3>
<ul>
<li>在AppDelegate中手动完成显示『View』和控制『Controller』</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//@implementation AppDelegate</span></div><div class="line"><span class="comment">//显示『View』</span></div><div class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions {</div><div class="line"><span class="comment">// Override point for customization after application launch.</span></div><div class="line">    <span class="keyword">self</span><span class="variable">.window</span>=[[<span class="built_in">UIWindow</span> alloc]initWithFrame:[[UIScreen mainScreen] bounds]];</div><div class="line">    <span class="keyword">self</span><span class="variable">.window</span><span class="variable">.backgroundColor</span>=[<span class="built_in">UIColor</span> grayColor];   </div><div class="line"><span class="comment">//contentMode</span></div><div class="line">    <span class="built_in">UIImageView</span> *iv=[[<span class="built_in">UIImageView</span> alloc]initWithImage:image];</div><div class="line">    iv<span class="variable">.tag</span>=<span class="number">10</span>;</div><div class="line">    iv<span class="variable">.contentMode</span>=UIViewContentModeScaleAspectFit;</div><div class="line">    iv<span class="variable">.backgroundColor</span>=[<span class="built_in">UIColor</span> brownColor];</div><div class="line">    iv<span class="variable">.frame</span>=CGRectMake(<span class="number">30</span>, <span class="number">350</span>, <span class="number">260</span>, <span class="number">100</span>);</div><div class="line"><span class="comment">//Affine</span></div><div class="line">    <span class="built_in">UIButton</span> *press=[[<span class="built_in">UIButton</span> alloc] initWithFrame:CGRectMake(<span class="number">200</span>, <span class="number">500</span>, <span class="number">40</span>, <span class="number">10</span>)];</div><div class="line">    press<span class="variable">.backgroundColor</span>=[<span class="built_in">UIColor</span> yellowColor];</div><div class="line">    press<span class="variable">.titleLabel</span><span class="variable">.text</span>=<span class="string">@"Press me"</span>;</div><div class="line">    [press addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(change) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">    </div><div class="line">    [<span class="keyword">self</span><span class="variable">.window</span> addSubview:iv];</div><div class="line">    [<span class="keyword">self</span><span class="variable">.window</span> addSubview:press];</div><div class="line">    [<span class="keyword">self</span><span class="variable">.window</span> makeKeyAndVisible];</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">}</div><div class="line"><span class="comment">//控制『Controller』</span></div><div class="line">-(<span class="keyword">void</span>) change {</div><div class="line">    [<span class="built_in">UIView</span> beginAnimations:<span class="string">@"chang"</span> context:<span class="literal">nil</span>];</div><div class="line">    [<span class="built_in">UIView</span> setAnimationDuration:<span class="number">1</span>];</div><div class="line">    [<span class="built_in">UIView</span> setAnimationCurve:UIViewAnimationCurveEaseInOut];</div><div class="line">    </div><div class="line">    <span class="built_in">UIView</span> *view=[<span class="keyword">self</span><span class="variable">.window</span> viewWithTag:<span class="number">101</span>]; <span class="comment">//通过tag获取view</span></div><div class="line">    view<span class="variable">.transform</span>=CGAffineTransformRotate(view<span class="variable">.transform</span>,M_PI/<span class="number">4.0</span>);</div><div class="line">    </div><div class="line">    [<span class="built_in">UIView</span> setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:view cache:<span class="literal">YES</span>];</div><div class="line">    </div><div class="line">    [<span class="built_in">UIView</span> commitAnimations];</div><div class="line">    </div><div class="line">    </div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="完全手动编写ViewControl">完全手动编写ViewControl</h3>
<ul>
<li>新建项目，修改xcode项目中deployment info中的信息，将『Main Interface』置成空，删除其对应的<strong><em>Main.Stroyboard</em></strong>，因为我们现在不使用storyboard。</li>
<li>将deployment info中的Launch Screen File置成空，并删除其对应的文件<strong><em>LanuchScreen.xib</em></strong>，这里也不需要启动程序初始化界面。</li>
<li>补充AppDelegate代码段</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//@implementation AppDelegate</span></div><div class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions {</div><div class="line"><span class="comment">// Override point for customization after application launch.</span></div><div class="line">    <span class="keyword">self</span><span class="variable">.window</span>=[[<span class="built_in">UIWindow</span> alloc] initWithFrame:[UIScreen mainScreen]<span class="variable">.bounds</span>];</div><div class="line">    ViewController *rootcontroller=[[ViewController alloc]init];</div><div class="line">    [<span class="keyword">self</span><span class="variable">.window</span> addSubview:rootcontroller<span class="variable">.view</span>];</div><div class="line">    [<span class="keyword">self</span><span class="variable">.window</span> makeKeyAndVisible];</div><div class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<ul>
<li>在ViewController类中手动添加视图代码，在视图控制器view被加载时调用。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//@implementation ViewController</span></div><div class="line"><span class="comment">//视图『View』</span></div><div class="line">- (<span class="keyword">void</span>)viewDidLoad {</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line"><span class="comment">// Do any additional setup after loading the view, typically from a nib.</span></div><div class="line">    <span class="built_in">UILabel</span>* label=[[<span class="built_in">UILabel</span> alloc]initWithFrame:CGRectMake(<span class="number">50</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">20</span>)];</div><div class="line">    label<span class="variable">.text</span>=<span class="string">@"This ViewController init by code"</span>;</div><div class="line">    <span class="built_in">UIButton</span>* button=[<span class="built_in">UIButton</span> buttonWithType:UIButtonTypeSystem];</div><div class="line">    button<span class="variable">.frame</span>=CGRectMake(<span class="number">100</span>, <span class="number">400</span>, <span class="number">40</span>, <span class="number">20</span>);</div><div class="line">    button<span class="variable">.titleLabel</span><span class="variable">.text</span>=<span class="string">@"Press me"</span>;</div><div class="line">    button<span class="variable">.backgroundColor</span>=[<span class="built_in">UIColor</span> blueColor];</div><div class="line">    [button addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(press) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">    [<span class="keyword">self</span><span class="variable">.view</span> addSubview:label];</div><div class="line">    [<span class="keyword">self</span><span class="variable">.view</span> addSubview:button];</div><div class="line">    <span class="keyword">self</span><span class="variable">.view</span><span class="variable">.backgroundColor</span>=[<span class="built_in">UIColor</span> yellowColor];</div><div class="line">}</div><div class="line"><span class="comment">//控制『Controller』</span></div><div class="line">-(<span class="keyword">void</span>)press {</div><div class="line">    <span class="keyword">self</span><span class="variable">.view</span><span class="variable">.backgroundColor</span>=[<span class="built_in">UIColor</span> greenColor];</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="使用nib文件初始化viewController">使用nib文件初始化viewController</h3>
<ul>
<li>新建项目，修改xcode项目中deployment info中的信息，将『Main Interface』置成空，删除其对应的<strong><em>Main.Stroyboard</em></strong>，因为我们现在不使用storyboard。</li>
<li>将deployment info中的Launch Screen File置成空，并删除其对应的文件<strong><em>LanuchScreen.xib</em></strong>，这里也不需要启动程序初始化界面。</li>
<li>创建试图控制器类『ViewController』以及其对应的xib文件『ViewController.xib』,并在属性界面『identify』中添加关联，将xib文件与ViewController关联起来，然后在『connections』属性中的view拉一根线指向xib文件的视图区域。</li>
<li>现在就可以在『ViewController.xib』文件中添加视图空间，完成界面设计了。</li>
<li>补充AppDelegate中的启动初始化代码，如下：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//@implementation AppDelegate</span></div><div class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions {</div><div class="line">    <span class="keyword">self</span><span class="variable">.window</span>=[[<span class="built_in">UIWindow</span> alloc] initWithFrame:[UIScreen mainScreen]<span class="variable">.bounds</span>];</div><div class="line">    ViewController *rootcontroller=[[ViewController alloc]initWithNibName:<span class="string">@"ViewController"</span> bundle:<span class="literal">nil</span>];</div><div class="line">    <span class="comment">//------------*</span></div><div class="line">    <span class="keyword">self</span><span class="variable">.window</span><span class="variable">.rootViewController</span>=rootcontroller;</div><div class="line">    <span class="comment">//rootcontroller的view会被自动添加为self.window的subview，被会自动根据screen的值调整view画布大小</span></div><div class="line">    <span class="comment">//--上面这一段也可以用下面的表示</span></div><div class="line">    <span class="comment">//[self.window addSubview:rootcontroller.view];</span></div><div class="line">    <span class="comment">//------------*</span></div><div class="line">    [<span class="keyword">self</span><span class="variable">.window</span> makeKeyAndVisible];</div><div class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<ul>
<li>在ViewController.m中完成完成控制代码，这个我们经常做，从控件拉一条剪头到ViewControler.m中，并实现，xcode自动完成UIControl与方法的绑定『-addTarget:action:forControlEvents:』。</li>
</ul>
<blockquote>
<p>在使用nib文件时，启动时将自动从nib文件中加载并<strong>生产相应的视图代码段</strong>，供给viewController使用，而且我发现当通过nib文件初始化界面后一次，后面即使你删掉这个nib文件，视图依旧能正常加载并工作。</p>
</blockquote>
<h3 id="使用storyboard管理ViewController">使用storyboard管理ViewController</h3>
<p>现在开始学iOS的同学，估计一开始就是直接用storyboard，相当方便。连上面AppDelegate部分的代码都不需要写了，下面说一下要使用storyboard相比上面要设置哪些东西。  </p>
<ul>
<li>由于使用storyboard需要xcode自动去帮我们完成试图控器的加载，我们需要在『项目名』-&gt;『Deployment info』-&gt;『Main Interface』属性处设置你项目中创建的storyboard的名称。</li>
<li>其次，在你的众多或者唯一的viewController『attributes inspector』属性中设置为『is initial View Contr』</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2015/01/08/hexo搭建博客/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">hexo搭建博客</div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="View-Controller" data-title="View Controller" data-url="http://yoursite.com/2015/01/09/View-Controller/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 jackhub
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>

  <script src="/js/main.js" type="text/javascript"></script>


  </div>
</body>
</html>